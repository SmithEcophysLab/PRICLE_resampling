source('~/Dropbox/PRICLE/Writing/Resampling/Analysis/resample_analysis_v4.1.R')
library(dplyr)
library(lme4)
library(car)
library(emmeans)
library(lmerTest)
library(multcompView)
cover2019 = read.csv('/Users/nicksmith/Dropbox/PRICLE/Data/Resampling/ComComp/CC_resample_2019.csv')
cover2018 = read.csv('/Users/nicksmith/Dropbox/PRICLE/Data/Resampling/ComComp/CC_resample_2018.csv') # read in data
cover2012 = subset(read.csv('/Users/nicksmith/Dropbox/PRICLE/Data/Resampling/ComComp/Old_data/20122013_comcomp.csv'), Month == 'Jul' & Year == 2012) # read in data
cover2013 = subset(read.csv('/Users/nicksmith/Dropbox/PRICLE/Data/Resampling/ComComp/Old_data/20122013_comcomp.csv'), Month == 'Jul' & Year == 2013) # read in data
cover2014 = subset(read.csv('/Users/nicksmith/Dropbox/PRICLE/Data/Resampling/ComComp/Old_data/2014_comcomp.csv'), Time == 3) # read in data
# 2019
cover2019$plotfac = as.factor(cover2019 $plot)
spp_codes = levels(cover2019 $spp_code)
plots = as.character(1:12)
diversity_mat2019 = c()
for (i in 1:length(spp_codes)){
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
}
colnames(diversity_mat2019) = spp_codes
rownames(diversity_mat2019) = NULL
sum = rowSums(diversity_mat2019)
diversity2019 = as.data.frame(diversity_mat2019)
diversity2019 $plot = seq(1, 12, 1)
diversity2019 $sum = sum
diversity2019 $D = 1/sum
diversity2019 $R = rowSums(diversity_mat2019 != 0)
diversity2019 $E = diversity2019 $D / diversity2019 $R
diversity2019 $year = 2019
# 2019
cover2019$plotfac = as.factor(cover2019 $plot)
spp_codes = levels(cover2019 $spp_code)
plots = as.character(1:12)
diversity_mat2019 = c()
spp_codes
i = 1
j = 1
pc_list = c()
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
sub
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
pc_list
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
diversity_mat2019
for (i in 1:length(spp_codes)){
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
}
diversity_mat2019 = c()
i
j
pc_list
head(cover2019)
head(cover2018)
cover2018$plotfac = as.factor(cover2018 $plot)
spp_codes = levels(cover2018 $spp_code)
plots = as.character(1:12)
diversity_mat2018 = c()
for (i in 1:length(spp_codes)){
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2018, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2018 = cbind(diversity_mat2018, pc_list)
}
diversity_mat2018
diversity_mat2019 = c()
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
pc_list
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
pc_list
pc_list = c()
# 2019
cover2019$plotfac = as.factor(cover2019 $plot)
spp_codes = levels(cover2019 $spp_code)
plots = as.character(1:12)
plots
diversity_mat2019 = c()
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
pc_list
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
diversity_mat2019
i
i = 1
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
diversity_mat2019
diversity_mat2019 = c()
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
diversity_mat2019
i = 2
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
pc_list
for (j in 1:length(plots)){
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
pc_list
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
pc_list
sub
pc
pc2
spp_codes[i]
plots[j]
cover2019 = read.csv('/Users/nicksmith/Dropbox/PRICLE/Data/Resampling/ComComp/CC_resample_2019.csv')
# 2019
cover2019$plotfac = as.factor(cover2019 $plot)
spp_codes = levels(cover2019 $spp_code)
plots = as.character(1:12)
diversity_mat2019 = c()
for (i in 1:length(spp_codes)){
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
}
colnames(diversity_mat2019) = spp_codes
rownames(diversity_mat2019) = NULL
sum = rowSums(diversity_mat2019)
diversity2019 = as.data.frame(diversity_mat2019)
diversity2019 $plot = seq(1, 12, 1)
diversity2019 $sum = sum
diversity2019 $D = 1/sum
diversity2019 $R = rowSums(diversity_mat2019 != 0)
diversity2019 $E = diversity2019 $D / diversity2019 $R
diversity2019 $year = 2019
head(diversity2019)
# 2019
cover2019$plotfac = as.factor(cover2019 $plot)
spp_codes = levels(cover2019 $spp_code)
plots = as.character(1:12)
diversity_mat2019 = c()
for (i in 1:length(spp_codes)){
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2019, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2019 = cbind(diversity_mat2019, pc_list)
}
colnames(diversity_mat2019) = spp_codes
rownames(diversity_mat2019) = NULL
sum = rowSums(diversity_mat2019)
diversity2019 = as.data.frame(diversity_mat2019)
diversity2019 $plot = seq(1, 12, 1)
diversity2019 $sum = sum
diversity2019 $D = 1/sum
diversity2019 $R = rowSums(diversity_mat2019 != 0)
diversity2019 $E = diversity2019 $D / diversity2019 $R
diversity2019 $year = 2019
# 2018
cover2018$plotfac = as.factor(cover2018 $plot)
spp_codes = levels(cover2018 $spp_code)
plots = as.character(1:12)
diversity_mat2018 = c()
for (i in 1:length(spp_codes)){
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2018, spp_code == spp_codes[i] & plotfac == plots[j])
pc = sub$pc / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2018 = cbind(diversity_mat2018, pc_list)
}
colnames(diversity_mat2018) = spp_codes
rownames(diversity_mat2018) = NULL
sum = rowSums(diversity_mat2018)
diversity2018 = as.data.frame(diversity_mat2018)
diversity2018 $plot = seq(1, 12, 1)
diversity2018 $sum = sum
diversity2018 $D = 1/sum
diversity2018 $R = rowSums(diversity_mat2018 != 0)
diversity2018 $E = diversity2018 $D / diversity2018 $R
diversity2018 $year = 2018
# 2012
cover2012$plotfac = as.factor(cover2012$Plot)
spp_codes = levels(cover2012$Species)
plots = as.character(1:12)
diversity_mat2012 = c()
for (i in 1:length(spp_codes)){
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2012, Species == spp_codes[i] & plotfac == plots[j])
pc = sub$PC / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2012 = cbind(diversity_mat2012, pc_list)
}
colnames(diversity_mat2012) = spp_codes
rownames(diversity_mat2012) = NULL
sum = rowSums(diversity_mat2012)
diversity2012 = as.data.frame(diversity_mat2012)
diversity2012 $plot = seq(1, 12, 1)
diversity2012 $sum = sum
diversity2012 $D = 1/sum
diversity2012 $R = rowSums(diversity_mat2012 != 0)
diversity2012 $E = diversity2012 $D / diversity2012 $R
diversity2012 $year = 2012
# 2013
cover2013$plotfac = as.factor(cover2013$Plot)
spp_codes = levels(cover2013$Species)
plots = as.character(1:12)
diversity_mat2013 = c()
for (i in 1:length(spp_codes)){
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2013, Species == spp_codes[i] & plotfac == plots[j])
pc = sub$PC / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2013 = cbind(diversity_mat2013, pc_list)
}
colnames(diversity_mat2013) = spp_codes
rownames(diversity_mat2013) = NULL
sum = rowSums(diversity_mat2013)
diversity2013 = as.data.frame(diversity_mat2013)
diversity2013 $plot = seq(1, 12, 1)
diversity2013 $sum = sum
diversity2013 $D = 1/sum
diversity2013 $R = rowSums(diversity_mat2013 != 0)
diversity2013 $E = diversity2013 $D / diversity2013 $R
diversity2013 $year = 2013
# 2014
cover2014$plotfac = as.factor(cover2014$Plot)
spp_codes = levels(cover2014$Species)
plots = as.character(1:12)
diversity_mat2014 = c()
for (i in 1:length(spp_codes)){
pc_list = c()
for (j in 1:length(plots)){
sub = subset(cover2014, Species == spp_codes[i] & plotfac == plots[j])
pc = sub$Mean / 100
pc2 = pc * pc
pc_list = rbind(pc_list, pc2)
}
diversity_mat2014 = cbind(diversity_mat2014, pc_list)
}
colnames(diversity_mat2014) = spp_codes
rownames(diversity_mat2014) = NULL
sum = rowSums(diversity_mat2014)
diversity2014 = as.data.frame(diversity_mat2014)
diversity2014 $plot = seq(1, 12, 1)
diversity2014 $sum = sum
diversity2014 $D = 1/sum
diversity2014 $R = rowSums(diversity_mat2014 != 0)
diversity2014 $E = diversity2014 $D / diversity2014 $R
diversity2014 $year = 2014
# combine
diversity2012[, 33:38]
head(diversity2019)
colnames(diversity2019)
# combine
diversity = rbind(diversity2012[, 33:38], diversity2013[, 33:38], diversity2014[, 24:29],
diversity2018[, 17:22], diversity2018[, 25:30])
# combine
diversity = rbind(diversity2012[, 33:38], diversity2013[, 33:38], diversity2014[, 24:29],
diversity2018[, 17:22], diversity2019[, 25:30])
diversity
cover_forsum2018 = cover2018[ , c(9, 10, 13)]
cover_forsum2018
head(cover2018)
head(cover2019)
cover_forsum2019 = cover2019[ , c(10, 11, 14)]
cover_group2019 = group_by(cover_forsum2019, pft, plot)
cover_sum2019 = as.data.frame(summarise_all(cover_group2019, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover_forsum_type2019 = cover2019[ , c(8, 10, 13)]
cover_group_type2019 = group_by(cover_forsum_type2019, type, plot)
cover_forsum_type2019 = cover2019[ , c(9, 11, 14)]
cover_group_type2019 = group_by(cover_forsum_type2019, type, plot)
cover_sum_type2019 = as.data.frame(summarise_all(cover_group_type2019, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover_forsum2019 = cover2019[ , c(10, 11, 14)]
cover_group2019 = group_by(cover_forsum2019, pft, plot)
cover_sum2019 = as.data.frame(summarise_all(cover_group2019, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover_forsum_type2019 = cover2019[ , c(9, 11, 14)]
cover_group_type2019 = group_by(cover_forsum_type2019, type, plot)
cover_sum_type2019 = as.data.frame(summarise_all(cover_group_type2019, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover_forsum2018 = cover2018[ , c(9, 10, 13)]
cover_group2018 = group_by(cover_forsum2018, pft, plot)
cover_sum2018 = as.data.frame(summarise_all(cover_group2018, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover_forsum_type2018 = cover2018[ , c(8, 10, 13)]
cover_group_type2018 = group_by(cover_forsum_type2018, type, plot)
cover_sum_type2018 = as.data.frame(summarise_all(cover_group_type2018, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover2012$plot = cover2012$Plot
cover2012$pft = as.character(cover2012$PFT)
cover2012$pc = cover2012$PC
cover2012$type = as.character(cover2012$Type)
cover2012$pft[cover2012$pft == 'C3G'] = 'c3g'
cover2012$pft[cover2012$pft == 'C4G'] = 'c4g'
cover2012$pft[cover2012$pft == 'FF'] = 'of'
cover2012$pft[cover2012$pft == 'RF'] = 'cf'
cover2012$pft[cover2012$pft == 'NF'] = 'nf'
cover2012$type[cover2012$type == 'Forb'] = 'forb'
cover2012$type[cover2012$type == 'Grass'] = 'grass'
cover_forsum2012 = cover2012[ , c(13, 14, 15)] # pft, plot, pc
cover_group2012 = group_by(cover_forsum2012, pft, plot)
cover_sum2012 = as.data.frame(summarise_all(cover_group2012, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover_forsum_type2012 = cover2012[ , c(13, 16, 15)]
cover_group_type2012 = group_by(cover_forsum_type2012, type, plot)
cover_sum_type2012 = as.data.frame(summarise_all(cover_group_type2012, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover2013$plot = cover2013$Plot
cover2013$pft = as.character(cover2013$PFT)
cover2013$pc = cover2013$PC
cover2013$type = as.character(cover2013$Type)
cover2013$pft[cover2013$pft == 'C3G'] = 'c3g'
cover2013$pft[cover2013$pft == 'C4G'] = 'c4g'
cover2013$pft[cover2013$pft == 'FF'] = 'of'
cover2013$pft[cover2013$pft == 'RF'] = 'cf'
cover2013$pft[cover2013$pft == 'NF'] = 'nf'
cover2013$type[cover2013$type == 'Forb'] = 'forb'
cover2013$type[cover2013$type == 'Grass'] = 'grass'
cover_forsum2013 = cover2013[ , c(13, 14, 15)] # pft, plot, pc
cover_group2013 = group_by(cover_forsum2013, pft, plot)
cover_sum2013 = as.data.frame(summarise_all(cover_group2013, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover_forsum_type2013 = cover2013[ , c(13, 16, 15)]
cover_group_type2013 = group_by(cover_forsum_type2013, type, plot)
cover_sum_type2013 = as.data.frame(summarise_all(cover_group_type2013, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover2014$plot = cover2014$Plot
cover2014$pft = as.character(cover2014$PFT)
cover2014$pc = cover2014$Mean
cover2014$type = as.character(cover2014$Type)
cover2014$pft[cover2014$pft == 'C3G'] = 'c3g'
cover2014$pft[cover2014$pft == 'C4G'] = 'c4g'
cover2014$pft[cover2014$pft == 'OF'] = 'of'
cover2014$pft[cover2014$pft == 'CF'] = 'cf'
cover2014$pft[cover2014$pft == 'NF'] = 'nf'
cover2014$type[cover2014$type == 'Forb'] = 'forb'
cover2014$type[cover2014$type == 'Grass'] = 'grass'
cover_forsum2014 = cover2014[ , c(15, 16, 17)] # pft, plot, pc
cover_group2014 = group_by(cover_forsum2014, pft, plot)
cover_sum2014 = as.data.frame(summarise_all(cover_group2014, .funs =funs(Sum=sum(., na.rm = TRUE))))
cover_forsum_type2014 = cover2014[ , c(15, 18, 17)]
cover_group_type2014 = group_by(cover_forsum_type2014, type, plot)
cover_sum_type2014 = as.data.frame(summarise_all(cover_group_type2014, .funs =funs(Sum=sum(., na.rm = TRUE))))
# combine
cover2012$year = 2012
cover2013$year = 2013
cover2014$year = 2014
colnames(cover2012)[c(6)] = c('spp_code')
colnames(cover2013)[c(6)] = c('spp_code')
colnames(cover2014)[c(5)] = c('spp_code')
cover2012[, c(6, 13:17)]
colnames(cover2018)
colnames(cover2019)
cover = rbind(cover2012[, c(6, 13:17)], cover2013[, c(6, 13:17)], cover2014[, c(5, 15:19)],
cover2018[, c(7, 10, 9, 13, 8, 3)], cover2019[, c(8, 11, 10, 14, 9, 3)])
cover_sum2012$year = 2012
cover_sum2013$year = 2013
cover_sum2014$year = 2014
cover_sum2018$year = 2018
cover_sum2019$year = 2019
cover_sum = rbind(cover_sum2012, cover_sum2013, cover_sum2014, cover_sum2018, cover_sum2019)
cover_sum_type2012$year = 2012
cover_sum_type2013$year = 2013
cover_sum_type2014$year = 2014
cover_sum_type2018$year = 2018
cover_sum_type2019$year = 2019
cover_sum_type = rbind(cover_sum_type2012, cover_sum_type2013, cover_sum_type2014,
cover_sum_type2018, cover_sum_type2019)
cover_sum_type2012$year = 2012
cover_sum_type2013$year = 2013
cover_sum_type2014$year = 2014
cover_sum_type2018$year = 2018
cover_sum_type2019$year = 2019
cover_sum_type = rbind(cover_sum_type2012, cover_sum_type2013, cover_sum_type2014,
cover_sum_type2018, cover_sum_type2019)
cover$nitrogen[cover$plot==1|cover$plot==2|cover$plot==7|cover$plot==8|cover$plot==9|cover$plot==11]=1
cover$nitrogen[cover$plot==3|cover$plot==4|cover$plot==5|cover$plot==6|cover$plot==10|cover$plot==12]=0
cover$precipitation[cover$plot==2|cover$plot==4|cover$plot==8|cover$plot==9|cover$plot==5|cover$plot==12]=0
cover$precipitation[cover$plot==1|cover$plot==3|cover$plot==6|cover$plot==7|cover$plot==10|cover$plot==11]=1
cover$block[cover$plot==1|cover$plot==2|cover$plot==3|cover$plot==4]=1
cover$block[cover$plot==5|cover$plot==6|cover$plot==7|cover$plot==8]=2
cover$block[cover$plot==9|cover$plot==10|cover$plot==11|cover$plot==12]=3
cover$nitrogenfac = as.factor(cover$nitrogen)
cover$precipitationfac = as.factor(cover$precipitation)
cover$blockfac = as.factor(cover$block)
cover$yearfac = as.factor(cover$year)
cover$plotfac = as.factor(cover$plot)
cover$treatment = 'treatment'
cover$treatment[cover$year == 2018 | cover$year == 2019] = 'recovery'
cover$nitrogen[cover$plot==1|cover$plot==2|cover$plot==7|cover$plot==8|cover$plot==9|cover$plot==11]=1
cover$nitrogen[cover$plot==3|cover$plot==4|cover$plot==5|cover$plot==6|cover$plot==10|cover$plot==12]=0
cover$precipitation[cover$plot==2|cover$plot==4|cover$plot==8|cover$plot==9|cover$plot==5|cover$plot==12]=0
cover$precipitation[cover$plot==1|cover$plot==3|cover$plot==6|cover$plot==7|cover$plot==10|cover$plot==11]=1
cover$block[cover$plot==1|cover$plot==2|cover$plot==3|cover$plot==4]=1
cover$block[cover$plot==5|cover$plot==6|cover$plot==7|cover$plot==8]=2
cover$block[cover$plot==9|cover$plot==10|cover$plot==11|cover$plot==12]=3
cover$nitrogenfac = as.factor(cover$nitrogen)
cover$precipitationfac = as.factor(cover$precipitation)
cover$blockfac = as.factor(cover$block)
cover$yearfac = as.factor(cover$year)
cover$plotfac = as.factor(cover$plot)
cover$treatment = 'treatment'
cover$treatment[cover$year == 2018 | cover$year == 2019] = 'recovery'
diversity$nitrogen[diversity$plot==1|diversity$plot==2|diversity$plot==7|diversity$plot==8|diversity$plot==9|diversity$plot==11]=1
diversity$nitrogen[diversity$plot==3|diversity$plot==4|diversity$plot==5|diversity$plot==6|diversity$plot==10|diversity$plot==12]=0
diversity$precipitation[diversity$plot==2|diversity$plot==4|diversity$plot==8|diversity$plot==9|diversity$plot==5|diversity$plot==12]=0
diversity$precipitation[diversity$plot==1|diversity$plot==3|diversity$plot==6|diversity$plot==7|diversity$plot==10|diversity$plot==11]=1
diversity$block[diversity$plot==1|diversity$plot==2|diversity$plot==3|diversity$plot==4]=1
diversity$block[diversity$plot==5|diversity$plot==6|diversity$plot==7|diversity$plot==8]=2
diversity$block[diversity$plot==9|diversity$plot==10|diversity$plot==11|diversity$plot==12]=3
diversity$nitrogenfac = as.factor(diversity$nitrogen)
diversity$precipitationfac = as.factor(diversity$precipitation)
diversity$blockfac = as.factor(diversity$block)
diversity$yearfac = as.factor(diversity$year)
diversity$plotfac = as.factor(diversity$plot)
diversity $treatment = 'treatment'
diversity $treatment[diversity $year == 2018 | diversity $year == 2019] = 'recovery'
cover_sum$nitrogen[cover_sum$plot==1|cover_sum$plot==2|cover_sum$plot==7|cover_sum$plot==8|cover_sum$plot==9|cover_sum$plot==11]=1
cover_sum$nitrogen[cover_sum$plot==3|cover_sum$plot==4|cover_sum$plot==5|cover_sum$plot==6|cover_sum$plot==10|cover_sum$plot==12]=0
cover_sum$precipitation[cover_sum$plot==2|cover_sum$plot==4|cover_sum$plot==8|cover_sum$plot==9|cover_sum$plot==5|cover_sum$plot==12]=0
cover_sum$precipitation[cover_sum$plot==1|cover_sum$plot==3|cover_sum$plot==6|cover_sum$plot==7|cover_sum$plot==10|cover_sum$plot==11]=1
cover_sum$block[cover_sum$plot==1|cover_sum$plot==2|cover_sum$plot==3|cover_sum$plot==4]=1
cover_sum$block[cover_sum$plot==5|cover_sum$plot==6|cover_sum$plot==7|cover_sum$plot==8]=2
cover_sum$block[cover_sum$plot==9|cover_sum$plot==10|cover_sum$plot==11|cover_sum$plot==12]=3
cover_sum$nitrogenfac = as.factor(cover_sum$nitrogen)
cover_sum$precipitationfac = as.factor(cover_sum$precipitation)
cover_sum$blockfac = as.factor(cover_sum$block)
cover_sum$yearfac = as.factor(cover_sum$year)
cover_sum$plotfac = as.factor(cover_sum$plot)
cover_sum $treatment = 'treatment'
cover_sum $treatment[cover_sum $year == 2018 | cover_sum $year == 2019] = 'recovery'
cover_sum_type$nitrogen[cover_sum_type$plot==1|cover_sum_type$plot==2|cover_sum_type$plot==7|cover_sum_type$plot==8|cover_sum_type$plot==9|cover_sum_type$plot==11]=1
cover_sum_type$nitrogen[cover_sum_type$plot==3|cover_sum_type$plot==4|cover_sum_type$plot==5|cover_sum_type$plot==6|cover_sum_type$plot==10|cover_sum_type$plot==12]=0
cover_sum_type$precipitation[cover_sum_type$plot==2|cover_sum_type$plot==4|cover_sum_type$plot==8|cover_sum_type$plot==9|cover_sum_type$plot==5|cover_sum_type$plot==12]=0
cover_sum_type$precipitation[cover_sum_type$plot==1|cover_sum_type$plot==3|cover_sum_type$plot==6|cover_sum_type$plot==7|cover_sum_type$plot==10|cover_sum_type$plot==11]=1
cover_sum_type$block[cover_sum_type$plot==1|cover_sum_type$plot==2|cover_sum_type$plot==3|cover_sum_type$plot==4]=1
cover_sum_type$block[cover_sum_type$plot==5|cover_sum_type$plot==6|cover_sum_type$plot==7|cover_sum_type$plot==8]=2
cover_sum_type$block[cover_sum_type$plot==9|cover_sum_type$plot==10|cover_sum_type$plot==11|cover_sum_type$plot==12]=3
cover_sum_type$nitrogenfac = as.factor(cover_sum_type$nitrogen)
cover_sum_type$precipitationfac = as.factor(cover_sum_type$precipitation)
cover_sum_type$blockfac = as.factor(cover_sum_type$block)
cover_sum_type$yearfac = as.factor(cover_sum_type$year)
cover_sum_type$plotfac = as.factor(cover_sum_type$plot)
cover_sum_type $treatment = 'treatment'
cover_sum_type $treatment[cover_sum_type $year == 2018 | cover_sum_type $year == 2019] = 'recovery'
write.csv(diversity[, c(1, 3:9)], 'Clean/diversity_data_v2.csv')
